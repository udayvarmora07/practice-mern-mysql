# =============================================================================
# Production Variables Example
# For Custom Base AMI with Node.js, PM2, Vault Agent, Nginx pre-installed
# =============================================================================

# -----------------------------------------------------------------------------
# AWS Configuration
# Use environment variables for credentials:
#   export AWS_ACCESS_KEY_ID="your-access-key"
#   export AWS_SECRET_ACCESS_KEY="your-secret-key"
# -----------------------------------------------------------------------------

aws_region = "ap-south-1"

# -----------------------------------------------------------------------------
# Source AMI Configuration
# REQUIRED: Your custom base AMI ID
# This AMI should have: Node.js, npm, PM2, Vault Agent, Nginx pre-installed
# -----------------------------------------------------------------------------

source_ami = "ami-xxxxxxxxxxxxxxxxx"  # <-- REPLACE with your custom AMI ID

# -----------------------------------------------------------------------------
# Instance Configuration
# -----------------------------------------------------------------------------

instance_type = "t3.micro"

# -----------------------------------------------------------------------------
# VPC/Network Configuration (optional)
# -----------------------------------------------------------------------------

# vpc_id    = "vpc-xxxxxxxxxx"
# subnet_id = "subnet-xxxxxxxxxx"
associate_public_ip_address = true

# -----------------------------------------------------------------------------
# Application Configuration
# -----------------------------------------------------------------------------

app_name      = "backend"
app_version   = "1.0.0"
app_env       = "prod"
app_directory = "/var/www/backend"
app_user      = "ubuntu"

# -----------------------------------------------------------------------------
# Pre-installed Software Paths (from your base AMI)
# Adjust if your base AMI uses different paths
# -----------------------------------------------------------------------------

nvm_dir      = "/home/ubuntu/.nvm"
node_version = "22.17.0"

# -----------------------------------------------------------------------------
# AMI Configuration
# -----------------------------------------------------------------------------

ami_description = "Backend API AMI with application baked in"
encrypt_boot    = true

# Copy to additional regions (optional)
# ami_regions = ["us-east-1", "eu-west-1"]

# -----------------------------------------------------------------------------
# EBS Volume Configuration
# -----------------------------------------------------------------------------

volume_size = 20
volume_type = "gp3"

# -----------------------------------------------------------------------------
# Tags
# -----------------------------------------------------------------------------

team = "devops"

tags = {
  Project     = "mern-app"
  ManagedBy   = "packer"
  Environment = "production"
  BaseAMI     = "custom-node-pm2-vault-nginx"
}

# -----------------------------------------------------------------------------
# Build Options
# -----------------------------------------------------------------------------

skip_create_ami       = false
force_deregister      = false
force_delete_snapshot = false
